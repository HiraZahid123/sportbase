import{r as m,j as e,u as M}from"./app-B_yo1E6D.js";import{I as i}from"./InputError-BSAceD6A.js";import{I as o}from"./InputLabel-CnJKB4x7.js";import{P as F}from"./PrimaryButton-gMjPdvD6.js";import{T as b}from"./TextInput-B9pEEotj.js";import{A as P}from"./AthleteLayout-DvZwrg7C.js";import{c as v,m as _,U as T,F as q}from"./MainNavbar-BsZcLVN4.js";import{C as A}from"./check-AnE1PkKR.js";import{C as D}from"./circle-check-big-Nc8cM457.js";import{B as C}from"./building-BTAREJaN.js";import{M as L}from"./mail-DxIYS7kO.js";import{P as S}from"./phone-BS5Opa-V.js";import{M as I}from"./map-pin-pZp368n_.js";import{C as E}from"./calendar-BcBwClfT.js";import{C as R}from"./circle-alert-CbZ81eGz.js";import{S as z}from"./save-BsbESiFb.js";import"./ReactToastify-2oc6LRjf.js";import"./AdminFooter-DFVon2Qx.js";import"./transition-Ck_IAu56.js";const Y=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],B=v("eraser",Y);const $=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],U=v("heart",$);const H=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],G=v("pen-tool",H);const O=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],W=v("user-check",O),X=({onSave:j,clearSignature:t,error:N})=>{const d=m.useRef(null),u=m.useRef(null),[a,r]=m.useState(!1),[h,f]=m.useState(!1);m.useEffect(()=>{const s=d.current,n=()=>{const g=u.current;g&&(s.width=g.offsetWidth,s.height=200)};n(),window.addEventListener("resize",n);const c=s.getContext("2d");return c.strokeStyle="#1e293b",c.lineWidth=2,c.lineCap="round",c.lineJoin="round",()=>window.removeEventListener("resize",n)},[]);const l=s=>{r(!0),x(s)},p=()=>{r(!1);const s=d.current;s.getContext("2d").beginPath(),h&&j(s.toDataURL())},x=s=>{if(!a)return;const n=d.current,c=n.getContext("2d"),g=n.getBoundingClientRect(),w=(s.clientX||s.touches[0].clientX)-g.left,k=(s.clientY||s.touches[0].clientY)-g.top;c.lineTo(w,k),c.stroke(),c.beginPath(),c.moveTo(w,k),f(!0)},y=()=>{const s=d.current;s.getContext("2d").clearRect(0,0,s.width,s.height),f(!1),t()};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{ref:u,className:`relative w-full bg-white border-2 rounded-2xl overflow-hidden transition-all ${N?"border-red-200":"border-slate-100 hover:border-slate-200"}`,style:{height:"200px"},children:[e.jsx("canvas",{ref:d,onMouseDown:l,onMouseMove:x,onMouseUp:p,onMouseOut:p,onTouchStart:l,onTouchMove:x,onTouchEnd:p,className:"cursor-crosshair w-full h-full touch-none"}),e.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:e.jsx("button",{type:"button",onClick:y,className:"p-2 rounded-xl bg-slate-50 text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-all shadow-sm",title:"Clear Signature",children:e.jsx(B,{className:"w-4 h-4"})})}),!h&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("p",{className:"text-slate-300 text-sm font-medium uppercase tracking-widest",children:"Sign here"})})]}),h&&e.jsxs("div",{className:"flex items-center gap-2 text-emerald-600",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Signature Captured"})]})]})};function he({clubs:j,registeredClub:t,registrationSource:N,showSuccessMessage:d,pendingEnrollment:u}){const{data:a,setData:r,post:h,processing:f,errors:l}=M({club_id:u?.training_group?.club_id||t?.id||"",training_group_id:u?.training_group_id||"",phone:"",address:"",birthday:"",emergency_contact_json:{name:"",phone:""},signature_confirmed:!1,signature_name:"",signature_data:""}),[p,x]=m.useState([]);m.useEffect(()=>{if(a.club_id){const s=j.find(n=>n.id===parseInt(a.club_id));x(s?s.training_groups:[])}else x([])},[a.club_id]);const y=s=>{s.preventDefault(),h(route("athlete.register.store"))};return e.jsx(P,{title:"Complete Your Profile",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx(_.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"inline-flex p-4 rounded-3xl bg-blue-50 border border-blue-100 mb-6",children:e.jsx(W,{className:"w-12 h-12 text-brand-blue"})}),e.jsx("h2",{className:"text-4xl font-black text-slate-800 tracking-tight",children:"Onboarding Your Athlete Identity"}),e.jsx("p",{className:"text-slate-500 mt-3 text-lg",children:"Finalize your connection to join a sports club and begin training."})]}),d&&t&&e.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8 p-6 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-2xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(D,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-green-900 mb-2",children:"Registration Successful!"}),e.jsx("p",{className:"text-green-800 mb-4",children:N==="club-specific"?`You have successfully registered for ${t.name} using their direct registration link.`:`You have successfully registered and selected ${t.name} as your club.`}),e.jsxs("div",{className:"bg-white/60 rounded-xl p-4 space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-green-900 flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Club Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx("span",{className:"font-medium",children:"Name:"}),e.jsx("span",{children:t.name})]}),t.email&&e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx(L,{className:"w-3 h-3"}),e.jsx("span",{children:t.email})]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx(S,{className:"w-3 h-3"}),e.jsx("span",{children:t.phone})]}),t.address&&e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx(I,{className:"w-3 h-3"}),e.jsx("span",{children:t.address})]})]}),t.description&&e.jsx("div",{className:"pt-2 border-t border-green-200",children:e.jsxs("p",{className:"text-green-700 text-sm italic",children:['"',t.description,'"']})})]}),e.jsx("p",{className:"text-green-700 text-sm mt-3",children:"Complete your profile below to finalize your membership and begin training."})]})]})}),e.jsx("div",{className:"bg-white rounded-3xl shadow-card border border-slate-100 overflow-hidden mb-12",children:e.jsxs("form",{onSubmit:y,className:"p-10 space-y-12",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-2 border-b border-slate-50",children:[e.jsx(C,{className:"w-5 h-5 text-brand-blue"}),e.jsx("h3",{className:"font-black text-slate-800 uppercase tracking-widest text-xs",children:"Club Connection"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"club_id",value:"Selecting Sports Club",className:"text-slate-600 font-bold"}),e.jsx("div",{className:"relative",children:e.jsxs("select",{id:"club_id",className:"mt-1 block w-full bg-slate-50 border-slate-200 focus:border-brand-blue focus:ring-brand-blue rounded-xl py-3 pl-4 transition-all",value:a.club_id,onChange:s=>r("club_id",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Choose a club..."}),j.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsx(i,{className:"mt-2",message:l.club_id})]}),a.club_id&&e.jsxs(_.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},className:"space-y-2",children:[e.jsx(o,{htmlFor:"training_group_id",value:"Assigned Training Group",className:"text-slate-600 font-bold"}),e.jsx("div",{className:"relative",children:e.jsxs("select",{id:"training_group_id",className:"mt-1 block w-full bg-slate-50 border-slate-200 focus:border-brand-blue focus:ring-brand-blue rounded-xl py-3 pl-4 transition-all",value:a.training_group_id,onChange:s=>r("training_group_id",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Choose a group..."}),p.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (â‚¬",s.price,"/mo)"]},s.id))]})}),e.jsx(i,{className:"mt-2",message:l.training_group_id})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-2 border-b border-slate-50",children:[e.jsx(T,{className:"w-5 h-5 text-brand-blue"}),e.jsx("h3",{className:"font-black text-slate-800 uppercase tracking-widest text-xs",children:"Athlete Particulars"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"phone",value:"Personal Contact",className:"text-slate-600 font-bold"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(S,{className:"w-4 h-4 text-slate-400"})}),e.jsx(b,{id:"phone",className:"mt-1 block w-full pl-10 bg-slate-50 border-slate-200 rounded-xl py-3",value:a.phone,placeholder:"+372 000 0000",onChange:s=>r("phone",s.target.value),required:!0})]}),e.jsx(i,{className:"mt-2",message:l.phone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"birthday",value:"Date of Birth",className:"text-slate-600 font-bold"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(E,{className:"w-4 h-4 text-slate-400"})}),e.jsx(b,{id:"birthday",type:"date",className:"mt-1 block w-full pl-10 bg-slate-50 border-slate-200 rounded-xl py-3",value:a.birthday,onChange:s=>r("birthday",s.target.value),required:!0})]}),e.jsx(i,{className:"mt-2",message:l.birthday})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"address",value:"Residential Address",className:"text-slate-600 font-bold"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pt-4 pointer-events-none",children:e.jsx(I,{className:"w-4 h-4 text-slate-400"})}),e.jsx("textarea",{id:"address",className:"mt-1 block w-full pl-10 bg-slate-50 border-slate-200 focus:border-brand-blue focus:ring-brand-blue rounded-xl py-4 min-h-[100px] transition-all",value:a.address,placeholder:"Full address details...",onChange:s=>r("address",s.target.value),required:!0})]}),e.jsx(i,{className:"mt-2",message:l.address})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-2 border-b border-slate-50",children:[e.jsx(U,{className:"w-5 h-5 text-brand-blue"}),e.jsx("h3",{className:"font-black text-slate-800 uppercase tracking-widest text-xs",children:"Emergency Contact"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"emergency_contact_name",value:"Contact Name",className:"text-slate-600 font-bold"}),e.jsx(b,{id:"emergency_contact_name",className:"mt-1 block w-full bg-slate-50 border-slate-200 rounded-xl py-3",value:a.emergency_contact_json.name,placeholder:"Full name of emergency contact",onChange:s=>r("emergency_contact_json",{...a.emergency_contact_json,name:s.target.value}),required:!0}),e.jsx(i,{className:"mt-2",message:l["emergency_contact_json.name"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"emergency_contact_phone",value:"Contact Phone",className:"text-slate-600 font-bold"}),e.jsx(b,{id:"emergency_contact_phone",className:"mt-1 block w-full bg-slate-50 border-slate-200 rounded-xl py-3",value:a.emergency_contact_json.phone,placeholder:"+372 000 0000",onChange:s=>r("emergency_contact_json",{...a.emergency_contact_json,phone:s.target.value}),required:!0}),e.jsx(i,{className:"mt-2",message:l["emergency_contact_json.phone"]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-2 border-b border-slate-50",children:[e.jsx(q,{className:"w-5 h-5 text-brand-blue"}),e.jsx("h3",{className:"font-black text-slate-800 uppercase tracking-widest text-xs",children:"Agreement & Digital Signature"})]}),e.jsxs("div",{className:"bg-slate-50 p-8 rounded-3xl border border-slate-200",children:[e.jsxs("div",{className:"prose prose-sm max-w-none text-slate-600 mb-8 max-h-40 overflow-y-auto pr-4 font-medium leading-relaxed bg-white/50 p-6 rounded-2xl border border-slate-100",children:[e.jsx("h4",{className:"text-slate-800 font-black uppercase text-[10px] tracking-widest mb-4",children:"Membership Terms & Conditions"}),e.jsx("p",{className:"mb-4",children:"1. I hereby apply for membership in the selected sports club and agree to abide by its rules and regulations."}),e.jsx("p",{className:"mb-4",children:"2. I understand that a monthly subscription fee will be charged to maintain active membership and access to training sessions."}),e.jsx("p",{className:"mb-4",children:"3. I confirm that all information provided is accurate and I am physically capable of participating in sports activities."}),e.jsx("p",{className:"mb-4",children:"4. I consent to the processing of personal data for the purpose of club management and security."}),e.jsx("p",{children:"5. I acknowledge that registration is only complete upon successful payment and club verification."})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx(o,{value:"Electronic Signature",className:"text-slate-600 font-bold"}),e.jsx(X,{onSave:s=>r("signature_data",s),clearSignature:()=>r("signature_data",""),error:l.signature_data}),e.jsx(i,{className:"mt-2",message:l.signature_data})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("label",{className:"flex items-start gap-4 cursor-pointer group",children:[e.jsx("div",{className:"relative flex items-center pt-1",children:e.jsx("input",{type:"checkbox",className:"w-6 h-6 rounded-lg border-slate-200 text-brand-blue focus:ring-brand-blue transition-all cursor-pointer",checked:a.signature_confirmed,onChange:s=>r("signature_confirmed",s.target.checked),required:!0})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-slate-700 group-hover:text-brand-blue transition-colors",children:"I have read and agree to the Membership Terms and Conditions."}),e.jsx("p",{className:"text-xs text-slate-400 mt-1 uppercase tracking-tighter font-black",children:"Mandatory for enrollment"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"signature_name",value:"Confirm Full Name for Digital Signature",className:"text-slate-600 font-bold"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(G,{className:"w-4 h-4 text-slate-400"})}),e.jsx(b,{id:"signature_name",className:"mt-1 block w-full pl-10 bg-white border-slate-200 rounded-xl py-3 italic font-serif",value:a.signature_name,placeholder:"Type your full legal name...",onChange:s=>r("signature_name",s.target.value),required:!0})]}),e.jsx(i,{className:"mt-2",message:l.signature_name}),e.jsx(i,{className:"mt-1",message:l.signature_confirmed})]})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-slate-50",children:[e.jsxs("div",{className:"mb-6 p-4 bg-amber-50 rounded-2xl border border-amber-100 flex gap-4 items-center",children:[e.jsx(R,{className:"w-6 h-6 text-amber-500 shrink-0"}),e.jsx("p",{className:"text-xs font-bold text-amber-700 leading-relaxed uppercase tracking-tight",children:"Next Step: Secure Stripe Payment. Your account will activate instantly after subscription completion."})]}),e.jsxs(F,{className:"w-full bg-brand-blue py-5 rounded-2xl shadow-xl shadow-blue-100 flex justify-center items-center gap-3 font-black text-sm uppercase tracking-widest hover:translate-y-[-2px] transition-all",disabled:f,children:[e.jsx(z,{className:"w-5 h-5"}),"Initialize Athlete Account"]})]})]})})]})})}export{he as default};
