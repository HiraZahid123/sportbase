<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RegistrationUrlDisplay Component Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@0.544.0/dist/umd/lucide-react.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 20px;
            background-color: #f8fafc;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .test-pass {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }
        .test-fail {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }
        /* Tailwind-like styles for the component */
        .bg-white { background-color: white; }
        .rounded-xl { border-radius: 0.75rem; }
        .shadow-card { box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); }
        .border { border-width: 1px; }
        .border-slate-100 { border-color: #f1f5f9; }
        .p-6 { padding: 1.5rem; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .gap-2 { gap: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .p-2 { padding: 0.5rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .bg-brand-blue\/10 { background-color: rgba(59, 130, 246, 0.1); }
        .w-5 { width: 1.25rem; }
        .h-5 { height: 1.25rem; }
        .text-brand-blue { color: #3b82f6; }
        .text-lg { font-size: 1.125rem; }
        .font-bold { font-weight: 700; }
        .text-slate-800 { color: #1e293b; }
        .text-slate-600 { color: #475569; }
        .flex-1 { flex: 1 1 0%; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .bg-slate-50 { background-color: #f8fafc; }
        .border-slate-200 { border-color: #e2e8f0; }
        .text-sm { font-size: 0.875rem; }
        .font-mono { font-family: ui-monospace, SFMono-Regular, monospace; }
        .text-slate-700 { color: #334155; }
        .bg-brand-blue { background-color: #3b82f6; }
        .text-white { color: white; }
        .hover\:bg-blue-700:hover { background-color: #1d4ed8; }
        .transition-all { transition-property: all; }
        .duration-200 { transition-duration: 200ms; }
        .bg-green-100 { background-color: #dcfce7; }
        .text-green-700 { color: #15803d; }
        .border-green-200 { border-color: #bbf7d0; }
        .w-4 { width: 1rem; }
        .h-4 { height: 1rem; }
        .justify-between { justify-content: space-between; }
        .pt-4 { padding-top: 1rem; }
        .border-t { border-top-width: 1px; }
        .text-slate-500 { color: #64748b; }
        .inline-flex { display: inline-flex; }
        .font-semibold { font-weight: 600; }
        .hover\:underline:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>RegistrationUrlDisplay Component Manual Test</h1>
        
        <div id="test-results"></div>
        
        <h2>Component Demo</h2>
        <div id="component-demo"></div>
        
        <h2>Test Instructions</h2>
        <ol>
            <li>Click the "Copy" button - it should change to "Copied!" with green styling</li>
            <li>Check your clipboard - it should contain the test URL</li>
            <li>Click the "Open Registration Page" link - it should open in a new tab</li>
            <li>Verify the URL format is correct</li>
        </ol>
    </div>

    <script type="text/babel">
        const { useState } = React;
        const { Copy, Check, ExternalLink } = LucideReact;

        // Mock RegistrationUrlDisplay component
        function RegistrationUrlDisplay({ registrationUrl }) {
            const [copied, setCopied] = useState(false);
            
            const copyToClipboard = async () => {
                try {
                    await navigator.clipboard.writeText(registrationUrl);
                    setCopied(true);
                    setTimeout(() => setCopied(false), 2000);
                } catch (err) {
                    console.error('Failed to copy URL:', err);
                    // Fallback for browsers that don't support clipboard API
                    const textArea = document.createElement('textarea');
                    textArea.value = registrationUrl;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    setCopied(true);
                    setTimeout(() => setCopied(false), 2000);
                }
            };
            
            return (
                <div className="bg-white rounded-xl shadow-card border border-slate-100 p-6">
                    <div className="flex items-center gap-2 mb-4">
                        <div className="p-2 rounded-lg bg-brand-blue/10">
                            <ExternalLink className="w-5 h-5 text-brand-blue" />
                        </div>
                        <h3 className="text-lg font-bold text-slate-800">Club Registration Link</h3>
                    </div>
                    
                    <p className="text-slate-600 mb-4">
                        Share this link with potential athletes to let them register directly for your club:
                    </p>
                    
                    <div className="flex gap-2 mb-4">
                        <input 
                            type="text" 
                            value={registrationUrl} 
                            readOnly 
                            className="flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg text-sm font-mono text-slate-700"
                        />
                        <button 
                            onClick={copyToClipboard}
                            className={`px-4 py-3 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center gap-2 ${
                                copied 
                                    ? 'bg-green-100 text-green-700 border border-green-200' 
                                    : 'bg-brand-blue text-white hover:bg-blue-700 border border-brand-blue'
                            }`}
                        >
                            {copied ? (
                                <>
                                    <Check className="w-4 h-4" />
                                    Copied!
                                </>
                            ) : (
                                <>
                                    <Copy className="w-4 h-4" />
                                    Copy
                                </>
                            )}
                        </button>
                    </div>
                    
                    <div className="flex justify-between items-center pt-4 border-t border-slate-100">
                        <span className="text-sm text-slate-500">
                            Test the registration process:
                        </span>
                        <a 
                            href={registrationUrl} 
                            target="_blank" 
                            rel="noopener noreferrer"
                            className="inline-flex items-center gap-2 text-brand-blue font-semibold text-sm hover:underline"
                        >
                            Open Registration Page
                            <ExternalLink className="w-4 h-4" />
                        </a>
                    </div>
                </div>
            );
        }

        // Test runner
        function runTests() {
            const results = [];
            
            // Test 1: Component renders without errors
            try {
                const testUrl = 'https://example.com/register/club/test-uuid-123';
                ReactDOM.render(
                    <RegistrationUrlDisplay registrationUrl={testUrl} />,
                    document.createElement('div')
                );
                results.push({ name: 'Component renders without errors', passed: true });
            } catch (error) {
                results.push({ name: 'Component renders without errors', passed: false, error: error.message });
            }

            // Test 2: URL format validation
            const testUrl = 'https://example.com/register/club/test-uuid-123';
            const isValidFormat = testUrl.includes('/register/club/') && testUrl.includes('test-uuid-123');
            results.push({ 
                name: 'URL format is correct', 
                passed: isValidFormat,
                error: isValidFormat ? null : 'URL does not match expected format'
            });

            // Test 3: Required props validation
            const hasRequiredProps = typeof testUrl === 'string' && testUrl.length > 0;
            results.push({ 
                name: 'Required props are provided', 
                passed: hasRequiredProps,
                error: hasRequiredProps ? null : 'registrationUrl prop is missing or invalid'
            });

            return results;
        }

        // Render test results
        function TestResults() {
            const results = runTests();
            
            return (
                <div>
                    {results.map((result, index) => (
                        <div key={index} className={`test-result ${result.passed ? 'test-pass' : 'test-fail'}`}>
                            <strong>{result.passed ? '✓' : '✗'} {result.name}</strong>
                            {result.error && <div>Error: {result.error}</div>}
                        </div>
                    ))}
                </div>
            );
        }

        // Render the component demo
        const testUrl = 'https://example.com/register/club/test-uuid-123';
        
        ReactDOM.render(<TestResults />, document.getElementById('test-results'));
        ReactDOM.render(<RegistrationUrlDisplay registrationUrl={testUrl} />, document.getElementById('component-demo'));
    </script>
</body>
</html>